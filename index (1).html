<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sommelier Digital - Recomendador de Cocktails</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5ede0 0%, #e8dcc8 100%);
            min-height: 100vh;
            color: #3d3d3d;
            padding: 10px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(180, 120, 60, 0.15);
            border: 1px solid rgba(180, 120, 60, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #c49a5c, #8b6f47);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #9b8b7e;
            font-size: 14px;
        }

        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question {
            margin-bottom: 30px;
        }

        .question label {
            display: block;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 16px;
            color: #8b6f47;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .options.full-width {
            grid-template-columns: 1fr;
        }

        .option-btn {
            padding: 15px;
            border: 2px solid rgba(180, 120, 60, 0.4);
            background: rgba(180, 120, 60, 0.08);
            color: #8b6f47;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
        }

        .option-btn:hover {
            background: rgba(180, 120, 60, 0.15);
            transform: translateY(-2px);
            border-color: rgba(180, 120, 60, 0.6);
        }

        .option-btn.selected {
            background: linear-gradient(135deg, rgba(196, 154, 92, 0.5), rgba(139, 111, 71, 0.5));
            color: #3d3d3d;
            font-weight: 600;
            border-color: #8b6f47;
        }

        .text-input {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(180, 120, 60, 0.3);
            background: rgba(180, 120, 60, 0.05);
            color: #3d3d3d;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 10px;
            backdrop-filter: blur(8px);
        }

        .text-input::placeholder {
            color: rgba(139, 111, 71, 0.4);
        }

        .text-input:focus {
            outline: none;
            background: rgba(180, 120, 60, 0.12);
            border-color: #8b6f47;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 2px solid rgba(180, 120, 60, 0.2);
            background: rgba(180, 120, 60, 0.05);
            border-radius: 8px;
            cursor: pointer;
            backdrop-filter: blur(8px);
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: rgba(180, 120, 60, 0.12);
            border-color: rgba(180, 120, 60, 0.4);
        }

        .checkbox-item input[type="checkbox"],
        .checkbox-item input[type="radio"] {
            margin-right: 10px;
            cursor: pointer;
            width: 18px;
            height: 18px;
            accent-color: #c49a5c;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            flex: 1;
            font-weight: normal;
            color: #8b6f47;
        }

        .sub-question {
            margin-left: 20px;
            margin-top: 15px;
            padding: 15px;
            background: rgba(180, 120, 60, 0.08);
            border-left: 3px solid #c49a5c;
            border-radius: 8px;
            display: none;
            backdrop-filter: blur(8px);
        }

        .sub-question.active {
            display: block;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid rgba(180, 120, 60, 0.4);
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
        }

        .btn-primary {
            background: linear-gradient(135deg, rgba(196, 154, 92, 0.6), rgba(139, 111, 71, 0.6));
            color: #fff;
            border-color: #8b6f47;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(196, 154, 92, 0.25);
            background: linear-gradient(135deg, rgba(196, 154, 92, 0.8), rgba(139, 111, 71, 0.8));
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: rgba(180, 120, 60, 0.15);
            color: #8b6f47;
            border: 2px solid rgba(180, 120, 60, 0.4);
        }

        .btn-secondary:hover {
            background: rgba(180, 120, 60, 0.25);
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(180, 120, 60, 0.15);
            border-radius: 2px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #c49a5c, #8b6f47);
            transition: width 0.3s ease;
        }

        .results {
            display: none;
        }

        .results.active {
            display: block;
        }

        .result-item {
            background: rgba(180, 120, 60, 0.1);
            border: 2px solid rgba(180, 120, 60, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
            display: flex;
            gap: 15px;
        }

        .result-item:hover {
            background: rgba(180, 120, 60, 0.18);
            transform: translateX(5px);
            border-color: #8b6f47;
        }

        .result-image {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #f5ede0, #e8dcc8);
            border-radius: 10px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            border: 2px solid rgba(180, 120, 60, 0.2);
        }

        .result-content {
            flex: 1;
        }

        .result-item h3 {
            color: #8b6f47;
            margin-bottom: 8px;
            font-size: 18px;
        }

        .result-item p {
            color: #9b8b7e;
            font-size: 12px;
            margin: 4px 0;
            line-height: 1.4;
        }

        .result-item .ingredients {
            font-size: 11px;
            color: #c49a5c;
            font-weight: 500;
            margin-top: 8px;
        }

        .confirmation {
            text-align: center;
            padding: 20px;
        }

        .confirmation h2 {
            color: #c49a5c;
            margin-bottom: 15px;
            font-size: 28px;
        }

        .confirmation h3 {
            color: #8b6f47;
            margin-bottom: 10px;
            font-size: 24px;
        }

        .confirmation p {
            color: #9b8b7e;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçπ Sommelier Digital</h1>
            <p>Deixa-nos ajudar a encontrar o cocktail perfeito</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <form id="quizForm">
            <!-- PERGUNTA 1: SABOR -->
            <div class="form-section active" data-step="1">
                <div class="question">
                    <label>1Ô∏è‚É£ Que tipo de sabor preferes no teu cocktail?</label>
                    <div class="options">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'flavor', 'doce')">Doce</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'flavor', 'acido')">√Åcido</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'flavor', 'amargo')">Amargo</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'flavor', 'equilibrado')">Equilibrado</button>
                    </div>
                </div>
            </div>

            <!-- PERGUNTA 2: FOR√áA -->
            <div class="form-section" data-step="2">
                <div class="question">
                    <label>2Ô∏è‚É£ Qu√£o forte queres o cocktail?</label>
                    <div class="options">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'strength', 'suave')">Suave</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'strength', 'medio')">M√©dio</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'strength', 'forte')">Forte</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'strength', 'muito-forte')">Muito Forte</button>
                    </div>
                </div>
            </div>

            <!-- PERGUNTA 3: BASE ALCO√ìLICA -->
            <div class="form-section" data-step="3">
                <div class="question">
                    <label>3Ô∏è‚É£ Qual destas bases alco√≥licas preferes?</label>
                    <div class="options full-width">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'base', 'vodka-gin')">ü•É Vodka ou Gin</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'base', 'rum-tequila')">üå¥ Rum ou Tequila</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'base', 'whisky-bourbon')">ü•É Whisky ou Bourbon</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'base', 'indiferente')">üé≤ Indiferente</button>
                    </div>
                </div>
            </div>

            <!-- PERGUNTA 4: TEXTURA -->
            <div class="form-section" data-step="4">
                <div class="question">
                    <label>4Ô∏è‚É£ Como preferes a textura do cocktail?</label>
                    <div class="options full-width">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'texture', 'com-gas')">üí® Com g√°s</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'texture', 'sem-gas')">ü•§ Sem g√°s</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'texture', 'cremoso')">üç¶ Cremoso</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'texture', 'indiferente')">üé≤ Indiferente</button>
                    </div>
                </div>
            </div>

            <!-- PERGUNTA 5: SABORES -->
            <div class="form-section" data-step="5">
                <div class="question">
                    <label>5Ô∏è‚É£ Que tipo de sabores te atraem mais?</label>
                    <div class="options full-width">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'flavors', 'frescos')">üçã Frescos / C√≠tricos</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'flavors', 'frutados')">üçì Frutados</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'flavors', 'intensos')">üå∂Ô∏è Intensos / Especiados</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'flavors', 'neutros')">‚ö™ Neutros</button>
                    </div>
                </div>
            </div>

            <!-- PERGUNTA 6: ALERGIAS -->
            <div class="form-section" data-step="6">
                <div class="question">
                    <label>6Ô∏è‚É£ Tens alergias ou restri√ß√µes alimentares?</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" name="allergies" id="allergy-none" value="nenhuma" onchange="selectAllergy('nenhuma')">
                            <label for="allergy-none">N√£o tenho alergias</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" name="allergies" id="allergy-yes" value="sim" onchange="selectAllergy('sim')">
                            <label for="allergy-yes">Tenho alergias</label>
                        </div>
                        <div class="sub-question" id="allergy-details">
                            <label style="margin-bottom: 10px; display: block;">Quais?</label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="allergy-nuts" value="frutos-secos" onchange="addAllergy('frutos-secos')">
                                    <label for="allergy-nuts">Frutos secos</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="allergy-lactose" value="lactose" onchange="addAllergy('lactose')">
                                    <label for="allergy-lactose">Lactose</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="allergy-egg" value="ovo" onchange="addAllergy('ovo')">
                                    <label for="allergy-egg">Ovo</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="allergy-other" value="outros" onchange="toggleOtherAllergy()">
                                    <label for="allergy-other">Outros</label>
                                </div>
                            </div>
                            <input type="text" id="allergy-other-text" class="text-input" placeholder="Especifique outras alergias..." style="display: none; margin-top: 10px;">
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" name="allergies" id="allergy-restrictions" value="restricoes" onchange="selectAllergy('restricoes')">
                            <label for="allergy-restrictions">Tenho restri√ß√µes alimentares</label>
                        </div>
                        <div class="sub-question" id="restrictions-details">
                            <input type="text" id="restrictions-text" class="text-input" placeholder="Descreva suas restri√ß√µes...">
                        </div>
                    </div>
                </div>
            </div>

            <!-- PERGUNTA 7: INGREDIENTES A EVITAR -->
            <div class="form-section" data-step="7">
                <div class="question">
                    <label>7Ô∏è‚É£ H√° algum ingrediente ou perfil que queiras evitar?</label>
                    <div class="options full-width">
                        <button type="button" class="option-btn" onclick="selectOption(this, 'avoid', 'muito-doce')">üç≠ Sabores muito doces</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'avoid', 'muito-amargo')">üò§ Sabores muito amargos</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'avoid', 'ervas')">üåø Ervas ou especiarias</button>
                        <button type="button" class="option-btn" onclick="selectOption(this, 'avoid', 'nada')">‚úÖ Nada a evitar</button>
                    </div>
                </div>
            </div>

            <!-- RESULTADOS -->
            <div class="results" id="results">
                <div class="question">
                    <label>üéâ Recomenda√ß√µes para ti:</label>
                    <div id="recommendationsList"></div>
                </div>
            </div>

            <!-- BOT√ïES DE NAVEGA√á√ÉO -->
            <div class="button-group">
                <button type="button" class="btn btn-secondary" id="btnBack" onclick="previousStep()" style="display: none;">‚Üê Voltar</button>
                <button type="button" class="btn btn-primary" id="btnNext" onclick="nextStep()" disabled>Pr√≥ximo ‚Üí</button>
            </div>
        </form>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 7;
        let answers = {};
        let allergiesList = [];

        const cocktails = {
            'Mojito': {
                emoji: 'üçπ',
                ingredients: ['Rum branco', 'Lim√£o fresco', 'Menta', 'A√ß√∫car', '√Ågua com g√°s'],
                profile: 'Fresco, doce e refrescante'
            },
            'Daiquiri': {
                emoji: 'üç∏',
                ingredients: ['Rum branco', 'Lim√£o fresco', 'Xarope simples'],
                profile: 'Cl√°ssico, c√≠trico e equilibrado'
            },
            'Margarita': {
                emoji: 'üçã',
                ingredients: ['Tequila', 'Cura√ßau', 'Sumo de lim√£o', 'A√ß√∫car'],
                profile: '√Åcido, c√≠trico e equilibrado'
            },
            'Cosmopolitan': {
                emoji: 'üçπ',
                ingredients: ['Vodka', 'Cura√ßau', 'Sumo de arando', 'Lim√£o'],
                profile: 'Frutado, doce e elegante'
            },
            'Negroni': {
                emoji: 'ü•É',
                ingredients: ['Gin', 'Vermute', 'Campari', 'Laranja'],
                profile: 'Amargo, forte e sofisticado'
            },
            'Caipirinha': {
                emoji: 'üçä',
                ingredients: ['Cacha√ßa', 'Lim√£o', 'A√ß√∫car', 'Gelo'],
                profile: 'Refrescante, c√≠trico e vibrante'
            },
            'Sazerac': {
                emoji: 'ü•É',
                ingredients: ['Bourbon/Rye', 'Anis', 'Amargos', 'Lim√£o'],
                profile: 'Intenso, especiado e tradicional'
            },
            'Pi√±a Colada': {
                emoji: 'ü••',
                ingredients: ['Rum branco', 'Leite de coco', 'Sumo de abacaxi'],
                profile: 'Cremoso, frutado e tropical'
            }
        };

        const recommendations = {
            'doce-suave-vodka-gin-com-gas-frescos-nenhuma-nada': ['Mojito', 'Margarita'],
            'doce-medio-rum-tequila-sem-gas-frutados-nenhuma-nada': ['Daiquiri', 'Margarita'],
            'amargo-forte-whisky-bourbon-sem-gas-intensos-nenhuma-nada': ['Negroni', 'Sazerac'],
            'acido-suave-vodka-gin-com-gas-frescos-nenhuma-nada': ['Cosmopolitan', 'Mojito'],
            'equilibrado-medio-indiferente-indiferente-frutados-nenhuma-nada': ['Margarita', 'Caipirinha'],
            'default': ['Mojito', 'Margarita', 'Daiquiri', 'Cosmopolitan']
        };

        function selectOption(button, category, value) {
            const parent = button.parentElement;
            parent.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            answers[category] = value;
            document.getElementById('btnNext').disabled = false;
        }

        function selectAllergy(type) {
            answers['allergies'] = type;

            const detailsDiv = document.getElementById('allergy-details');
            const restrictionsDiv = document.getElementById('restrictions-details');

            if (type === 'sim') {
                detailsDiv.classList.add('active');
                restrictionsDiv.classList.remove('active');
                document.getElementById('btnNext').disabled = false;
            } else if (type === 'restricoes') {
                detailsDiv.classList.remove('active');
                restrictionsDiv.classList.add('active');
                document.getElementById('btnNext').disabled = false;
            } else {
                detailsDiv.classList.remove('active');
                restrictionsDiv.classList.remove('active');
                document.getElementById('btnNext').disabled = false;
                allergiesList = [];
            }
        }

        function addAllergy(allergy) {
            const checkbox = document.getElementById(`allergy-${allergy.split('-')[0]}`);
            if (checkbox.checked) {
                if (!allergiesList.includes(allergy)) {
                    allergiesList.push(allergy);
                }
            } else {
                allergiesList = allergiesList.filter(a => a !== allergy);
            }
            answers['allergies_list'] = allergiesList.join(', ');
        }

        function toggleOtherAllergy() {
            const checkbox = document.getElementById('allergy-other');
            const input = document.getElementById('allergy-other-text');
            if (checkbox.checked) {
                input.style.display = 'block';
            } else {
                input.style.display = 'none';
            }
        }

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showStep(step) {
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelector(`[data-step="${step}"]`).classList.add('active');

            const backBtn = document.getElementById('btnBack');
            const nextBtn = document.getElementById('btnNext');

            if (step === 1) {
                backBtn.style.display = 'none';
            } else {
                backBtn.style.display = 'flex';
            }

            if (step === totalSteps) {
                nextBtn.textContent = 'Ver Recomenda√ß√µes ‚Üí';
            } else {
                nextBtn.textContent = 'Pr√≥ximo ‚Üí';
            }

            updateProgress();
        }

        function nextStep() {
            if (currentStep === totalSteps) {
                showRecommendations();
                return;
            }

            if (currentStep < totalSteps) {
                currentStep++;
                document.getElementById('btnNext').disabled = true;
                showStep(currentStep);
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                document.getElementById('btnNext').disabled = true;
                showStep(currentStep);
            }
        }

        function showRecommendations() {
            const key = [answers.flavor, answers.strength, answers.base, answers.texture, answers.flavors, answers.allergies, answers.avoid].join('-');
            const cocktailNames = recommendations[key] || recommendations.default;

            let html = '';
            cocktailNames.forEach(name => {
                const cocktail = cocktails[name];
                html += `
                    <div class="result-item" onclick="selectCocktail('${name}')">
                        <div class="result-image">${cocktail.emoji}</div>
                        <div class="result-content">
                            <h3>${name}</h3>
                            <p><strong>${cocktail.profile}</strong></p>
                            <p class="ingredients">üì¶ ${cocktail.ingredients.join(' ‚Ä¢ ')}</p>
                        </div>
                    </div>
                `;
            });

            document.getElementById('recommendationsList').innerHTML = html;
            document.getElementById('results').classList.add('active');
            document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
            document.getElementById('btnNext').style.display = 'none';
            document.getElementById('btnBack').style.display = 'flex';
            document.getElementById('btnBack').textContent = '‚Üê Voltar';
            document.getElementById('btnBack').onclick = function() { reset(); };
        }

        function selectCocktail(name) {
            const cocktail = cocktails[name];
            const confirmation = `
                <div class="confirmation">
                    <h2>${cocktail.emoji}</h2>
                    <h3>${name}</h3>
                    <p><strong>${cocktail.profile}</strong></p>
                    <p>üì¶ Ingredientes: ${cocktail.ingredients.join(', ')}</p>
                    <p>Pedido confirmado! Chama o bartender para preparar o teu cocktail.</p>
                    <button class="btn btn-primary" onclick="reset()" style="margin-top: 20px;">Fazer Novo Pedido</button>
                </div>
            `;
            document.getElementById('recommendationsList').innerHTML = confirmation;
        }

        function reset() {
            currentStep = 1;
            answers = {};
            allergiesList = [];
            document.getElementById('results').classList.remove('active');
            document.getElementById('btnNext').style.display = 'flex';
            document.getElementById('btnNext').disabled = true;
            document.getElementById('btnNext').textContent = 'Pr√≥ximo ‚Üí';
            document.getElementById('btnNext').onclick = function() { nextStep(); };

            // Limpar todas as sele√ß√µes
            document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => input.checked = false);
            document.getElementById('allergy-details').classList.remove('active');
            document.getElementById('restrictions-details').classList.remove('active');
            document.getElementById('allergy-other-text').style.display = 'none';

            showStep(1);
        }

        // Inicializar
        showStep(1);
    </script>
</body>
</html>
